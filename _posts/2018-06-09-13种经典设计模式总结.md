---
layout: post
title: 13中经典设计模式总结
date: 2017-08-30
categories: 设计
tags: [设计]
---

> 摘要：本文主要总结 11 种经典设计模式的概念以及应用场景。知道常用模式和基本的面向对象概念并不会让人马上变成好的面向对象设计者，但这是个基本的学习过程。真正的设计大师脑子记的不会是固定的模式，他们关心的是建立弹性的设计，可以维护，可以应付改变。

### 一 基础

- 抽象
- 封装
- 多态
- 继承

### 二 原则

- 单一职责原则：一个类负责一项职责
- 里式替换原则：继承与派生原则
- 依赖倒置原则：高层模块不应该依赖底层模块，二者都应该依赖其抽象；针对接口编程而不要针对实现编程
- 接口隔离原则：建立单一的接口，不要建立庞大臃肿的接口；尽量细化接口，接口中的方法尽量少
- 迪米特法则：低耦合，高内聚
- 开闭原则：一个软件实体如类，模块和函数应该对扩展开放，对修改关闭
- 组合|聚合服用原则：尽量使用组合和聚合，少使用继承关系来达到复用
- 封装变化
- 为交互对象的松耦合设计而努力

### 三 模式

#### 策略模式：

##### 定义

    定义算法族，分别封装起来，让他们之间可以互相替换。此模式让算法的变化独立于使用算法的客户。本质是分离算法，选择实现
 
##### 时序图

##### 使用情景

- 出现许多相关的类，仅仅是行为上的差别
- 出现同一种算法，有很多不同的实现

#### 观察者模式

    在对象之间定义一对多的依赖，这样一来，当一个对象改变状态，依赖他的对象都会收到通知并自动更新。重心在于触发联动。

- 观察者模式定义了对象之间一对多的关系
- 被观察者用统一的接口来更新观察者
- 被观察者不知道观察者的细节，只知道他们都实现了观察者的接口

##### 使用情景

- 当一个抽象模型的一方面依赖于另一方面
- 更改一个对象的时候，需要修改一系列其他的对象
- 当一个对象必须通知其他对象，而你希望这个对象和其他对象是松耦合的

#### 装饰模式
    
    动态地将责任附加到对象上。想要实现扩展，装饰者提供了比继承更加弹性的替代方案。

#### 工厂方法
    
    定义了一个创建对象的接口，但由子类决定实例化的类是哪一个。工厂方法把类的实例化推迟到子类。
    
#### 抽象工厂方法

    提供一个接口，用来创建相关的或依赖对象的家族，而不需要明确指定具体类。
    抽象工厂方法的每一个创建接口，其实是一个工厂方法。
    
#### 单例模式

    确保一个类只有一个实例，并提供全局的访问点。

#### 命令模式  
    
    将请求封装成对象，这可以让你使用不同的请求，队列或者日志请求来参数化其他对象。命令模式也可以支持撤销操作。
    
#### 适配器模式

    将一个类的接口转换成用户期望的另一个的接口。
    
#### 外观模式

    提供一个统一的接口，用来访问子系统中的一群接口。外观模式定义了一个高层接口，让子系统更容易使用。
    
- 辨：适配器将一个对象包起来以改变其接口；装饰器将对象包起来以增加新的行为和责任；而外观将一群对象包装起来以简化其接口。 

#### 模板模式

    在一个方法中定义一个算法的骨架，而将一些步骤延迟到子类中。模板方法使得在不改变算法结构的情况下，重新定义算法的某些步骤。
    
#### 迭代器模式

    提供一种方法顺序访问一个聚合对象的各个元素，而又不暴露其内部的表现。

#### 组合模式

    允许你将对象组成树形结构来表现“整体/部分”的层次结构。组合能让客户以一致的方式处理个别对象和对象组合。
    
#### 状态模式

    允许对象在内部状态改变时改变他的行为，对象看起来好像修改了他的类。
    
##### 适用情景

对象行为因状态的变化而变化。

#### 代理模式

    为另一个对象提供一个替身或占位符以访问这个对象。

- 虚代理：根据需要来创建开销很大的对象（该对象只在真正需要的时候被创建）
- 远程代理：用来在不同的空间地址上代表同一个对象
- copy-on-write代理：拷贝一个大的对象是很消耗资源的，如果这个被拷贝的对象从上次操作以来，根本就没有被修改过，那么再拷贝这个对象是没有必要的，白白消耗资源而已。那么就可以使用代理来延迟拷贝的过程，可以等到对象被修改的时候才真的对它进行拷贝。
- cache代理：为那些昂贵的操作结果提供临时的存储空间，以便多个客户端可以共享这些结果
- 防火墙代理：保护对象不被恶意的用户访问和操作
- 同步代理：使多个用户可以同时访问目标对象而没有冲突
- 智能指引：在访问对象的时候增加一些附加操作

#### 解释器模式

    给定一个语言，定义它的文法的一种表示，并定义一个解释器，这个解释器使用该表示来解释语言中的句子。
    
### 要点

- 应该以设计为本，以用最简单的方案解决问题为本
- 良好的OO设计必须具备可复用，可扩充，可维护三个特性
- 我们经常把系统中会变化的部分抽出来封装

### 书籍

- 《设计模式》——四人组
- 《The Timeless Way of Building》
- 《A Pattern Language》